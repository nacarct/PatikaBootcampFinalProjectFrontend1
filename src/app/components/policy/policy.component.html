

<div class="row pt-2">
  <div class="col-sm-2">

  </div>
  <div class="col-sm-8">
    <mat-card>
      <mat-card-header>
        <h2 class="cardHeader">Sağlık Sigortası Girişi</h2>
      </mat-card-header>
      <mat-card-content>
        <mat-horizontal-stepper #stepper labelPosition="bottom">
          <mat-step [stepControl]="firstFormGroup" errorMessage="Lütfen tüm alanları doldurun!" [editable]="isEditable">
            <ng-template matStepLabel><mat-icon>person_outline</mat-icon> <br> <b>Sigorta Ettiren</b></ng-template>
            <form class="stepOneForm" [formGroup]="firstFormGroup" (ngSubmit)="submitFirstForm()" >
              <div class="row pt-3">
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Tc Kimlik No</mat-label>
                    <input required name="TcKn" formControlName="tcKn" matInput type="number" placeholder="12345678901" minlength="11" maxlength="11">
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Ad</mat-label>
                    <input name="FirstName" formControlName="firstName" matInput placeholder="Ad" readonly>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Soyad</mat-label>
                    <input name="LastName" formControlName="lastName" matInput placeholder="Soyad" minlength="2" maxlength="25" readonly>
                  </mat-form-field>
                </div>
              </div>
              <div class="row pt-2">
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Doğum Tarihi</mat-label>
                    <input required name="BirthDate" formControlName="birthDate" matInput [matDatepicker]="picker" readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Cinsiyet</mat-label>
                    <input required name="Gender" formControlName="gender" matInput placeholder="Cinsiyet" readonly>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Telefon</mat-label>
                    <input name="Phone" formControlName="phone" type="phone" matInput placeholder="Telefon" readonly>
                  </mat-form-field>
                </div>
              </div>
              <div class="row pt-2">
                <div class="col-sm-12">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Adres</mat-label>
                    <textarea name="Address" formControlName="address" matInput class="bigHeight" readonly></textarea>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 pt-3">
                  <section class="checkPerson">
                    <mat-checkbox name="OwnInsurer" formControlName="ownInsurer">Sigorta ettiren aynı zamanda sigortalıdır.</mat-checkbox>
                  </section>
                </div>
                <div class="col-sm-6 pt-3 footerButtons">

                  <div *ngIf="firstFormCheck; else elseBlock">
                    <button mat-stroked-button style="color: limegreen" matStepperNext>İleri</button>
                  </div>
                  <ng-template #elseBlock>
                    <button type="submit" mat-stroked-button style="color: limegreen">Kaydet</button>
                  </ng-template>
                </div>
              </div>
            </form>
          </mat-step>
          <mat-step [stepControl]="secondFormGroup" errorMessage="Lütfen tüm alanları doldurun!">
            <ng-template matStepLabel><mat-icon>person</mat-icon> <br> <b>Sigortalı</b></ng-template>
            <form class="stepTwoForm" [formGroup]="secondFormGroup" (ngSubmit)="submitSecondForm()">
              <div class="row pt-3">
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Tc Kimlik No</mat-label>
                    <input required name="TcKn2" formControlName="tcKn2" matInput type="number" placeholder="12345678901" minlength="11" maxlength="11">
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Ad</mat-label>
                    <input name="FirstName2" formControlName="firstName2" matInput placeholder="Ad" readonly>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Soyad</mat-label>
                    <input name="LastName2" formControlName="lastName2" matInput placeholder="Soyad" minlength="2" maxlength="25" readonly>
                  </mat-form-field>
                </div>
              </div>
              <div class="row pt-2">
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Doğum Tarihi</mat-label>
                    <input required name="BirthDate2" formControlName="birthDate2" matInput [matDatepicker]="picker2">
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Cinsiyet</mat-label>
                    <input required name="Gender2" formControlName="gender2" matInput placeholder="Cinsiyet" readonly>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Telefon</mat-label>
                    <input name="Phone2" formControlName="phone2" type="phone" matInput placeholder="Telefon">
                  </mat-form-field>
                </div>
              </div>
              <div class="row pt-2">
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Boy (cm)</mat-label>
                    <input required name="Height" formControlName="height" matInput type="number" placeholder="180" minlength="2" maxlength="3">
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Kilo (kg)</mat-label>
                    <input required name="Weight" formControlName="weight" matInput type="number" placeholder="75" minlength="1" maxlength="3">
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Yakınlık</mat-label>
                    <select required name="Relation" formControlName="relation" matNativeControl>
                      <option value="Kendisi">Kendisi</option>
                      <option value="Eşi">Eşi</option>
                      <option value="Çocuğu">Çocuğu</option>
                    </select>
                  </mat-form-field>
                </div>
              </div>
              <div class="row pt-2">
                <div class="col-sm-12">
                  <mat-form-field class="fullWidth" appearance="fill">
                    <mat-label>Adres</mat-label>
                    <textarea name="Address2" formControlName="address2" matInput class="bigHeight"></textarea>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-6 pt-3">

                </div>
                <div class="col-sm-6 pt-3 footerButtons">
                  <div *ngIf="secondFormCheck; else elseBlock">
                    <button mat-stroked-button style="color: limegreen" matStepperNext>İleri</button>
                  </div>
                  <ng-template #elseBlock>
                    <button type="submit" mat-stroked-button style="color: limegreen">Kaydet</button>
                  </ng-template>
                </div>
              </div>
            </form>
          </mat-step>
          <mat-step [stepControl]="thirdFormGroup" errorMessage="Lütfen tüm alanları doldurun!">
            <ng-template matStepLabel><mat-icon>shopping_cart</mat-icon> <br> <b>Ürün ve Prim</b></ng-template>
            <form [formGroup]="thirdFormGroup" (ngSubmit)="submitThirdForm()">
              <mat-radio-group required name="product" formControlName="product" labelPosition="after" aria-label="Select an option">
                <h3>Ürün ve Prim</h3>
                <div class="row pt-1">
                  <div class="col-sm-12 pt-3">
                    <table class="table table-bordered fullWidth table-hover table-striped">
                      <thead>
                      <tr>
                        <th>Ürün Adı</th>
                        <th>Fiyat</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let product of products;">
                        <td>{{product.productName}}</td>
                        <td><mat-radio-button [value]=product.productId>{{product.price}} TL</mat-radio-button></td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6 pt-3">

                  </div>
                  <div class="col-sm-6 pt-3 footerButtons">
                    <div *ngIf="thirdFormCheck; else elseBlock">
                      <button mat-stroked-button style="color: limegreen" matStepperNext>İleri</button>
                    </div>
                    <ng-template #elseBlock>
                      <button type="submit" mat-stroked-button style="color: limegreen">Kaydet</button>
                    </ng-template>
                  </div>
                </div>
              </mat-radio-group>

            </form>

          </mat-step>
          <mat-step>
            <ng-template matStepLabel><mat-icon>done</mat-icon> <br> <b>Özet</b></ng-template>
            <h1>Özet</h1>
            <hr>
            <div>
              <div class="row pt-1">
                <div class="col-sm-6">
                  <h3><b>Sigorta Ettiren</b></h3>
                  <table class="table table-striped table-bordered pt-2">
                    <tbody>
                    <tr>
                      <th width="100">Tc Kimlik No</th>
                      <td>{{insurer.customerTcKn}}</td>
                    </tr>
                    <tr>
                      <th>Ad</th>
                      <td>{{insurer.firstName}}</td>
                    </tr>
                    <tr>
                      <th>Soyad</th>
                      <td>{{insurer.lastName}}</td>
                    </tr>
                    <tr>
                      <th>Doğum Tarihi</th>
                      <td>{{insurer.birthDate.toLocaleDateString()}}</td>
                    </tr>
                    <tr>
                      <th>Cinsiyet</th>
                      <td>{{insurer.gender}}</td>
                    </tr>
                    <tr>
                      <th>Telefon</th>
                      <td>{{insurer.phone}}</td>
                    </tr>
                    <tr>
                      <th>Adres</th>
                      <td>{{insurer.address}}</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div class="col-sm-6">
                  <h3><b>Sigortalı</b></h3>
                  <table class="table table-striped table-bordered pt-2">
                    <tbody>
                    <tr>
                      <th width="100">Tc Kimlik No</th>
                      <td>{{insured.customerTcKn}}</td>
                    </tr>
                    <tr>
                      <th>Ad</th>
                      <td>{{insured.firstName}}</td>
                    </tr>
                    <tr>
                      <th>Soyad</th>
                      <td>{{insured.lastName}}</td>
                    </tr>
                    <tr>
                      <th>Doğum Tarihi</th>
                      <td>{{insured.birthDate.toLocaleDateString()}}</td>
                    </tr>
                    <tr>
                      <th>Cinsiyet</th>
                      <td>{{insured.gender}}</td>
                    </tr>
                    <tr>
                      <th>Telefon</th>
                      <td>{{insured.phone}}</td>
                    </tr>
                    <tr>
                      <th>Adres</th>
                      <td>{{insured.address}}</td>
                    </tr>
                    <tr>
                      <th>Boy (cm)</th>
                      <td>{{insured.height}}</td>
                    </tr>
                    <tr>
                      <th>Kilo (kg)</th>
                      <td>{{insured.weight}}</td>
                    </tr>
                    <tr>
                      <th>Yakınlık</th>
                      <td>{{insured.relation}}</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="row pt-2">
                <div class="col-sm-12">
                  <h1>Ürün Bilgileri</h1>
                  <hr>
                  <table class="table table-bordered fullWidth table-hover table-striped">
                    <thead>
                    <tr>
                      <th>Ürün Adı</th>
                      <th>Fiyat</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                      <td>{{selectedProduct.productName}}</td>
                      <td><b>{{selectedProduct.price}} TL</b></td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="row pt-2">
                <form [formGroup]="fourthFormGroup" (ngSubmit)="submitFourthForm()">
                  <div class="col-sm-12">
                    <h1>Ödeme Bilgileri</h1>
                    <hr>
                    <mat-form-field appearance="fill">
                      <mat-label>Ödeme Planı</mat-label>
                      <select name="PaymentPart" formControlName="paymentPart" matNativeControl required>
                        <option value=1>Peşin</option>
                        <option value=3>3 Taksit</option>
                        <option value=6>6 Taksit</option>
                      </select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-12 pt-2">
                    <table class="table table-bordered fullWidth table-hover table-striped">
                      <thead>
                      <tr>
                        <th>Taksit</th>
                        <th>Taksit Tutarı</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let payment of payLine">
                        <td>{{payment.PartInfo}}</td>
                        <td><b>{{payment.PartPrice.toFixed(2)}} TL</b></td>
                      </tr>
                      <tr style="background-color: darkgray">
                        <td style="text-align: end"><span>Genel Toplam : </span></td>
                        <td>{{selectedProduct.price}} TL</td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-sm-12 pt-2 footerButtons">
                    <div *ngIf="fourthFormCheck; else elseBlock">
                      <h1 class="text-center" style="color: limegreen;" *ngIf="dataSaved">Veriler Kaydedildi.<br>Poliçe No : {{policyNo}}</h1>
                    </div>
                    <ng-template #elseBlock>
                      <button type="submit" mat-stroked-button style="color: limegreen">Kaydet</button>
                    </ng-template>
                  </div>
                  <div class="col-sm-12">

                  </div>
                </form>
              </div>
            </div>
          </mat-step>
        </mat-horizontal-stepper>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="col-sm-2">

  </div>
</div>

